System.register(["./vendor.js","./frameworks.js"],(function(e,t){"use strict";var n,s,i,o,r,c,a,l,u,f,d,g,m,j,h,v,p;return{setters:[function(e){n=e.a,s=e.o,i=e.c,o=e.b,r=e.q,c=e.g,a=e.r},function(e){l=e.o,u=e.R,f=e.g,d=e.V,g=e.f,m=e.L,j=e.W,h=e.X,v=e.Y,p=e.r}],execute:function(){function e(e){const t=o(e,".js-gist-files"),n=document.getElementById("js-gist-file-template"),s=document.createElement("div");s.innerHTML=n.textContent;for(const o of s.querySelectorAll("[id]"))o.removeAttribute("id");const i=s.querySelector(".js-code-textarea");null!=i&&i.setAttribute("id",`blob_contents_${Date.now()}`);for(const o of s.children)t.append(o);return t.lastElementChild}function L(e){return u(i(e,".js-code-editor"))}async function y(e){const t=e.getAttribute("data-language-detection-url");if(!t)return;const n=new URL(t,window.location.origin),s=new URLSearchParams(n.search.slice(1));s.append("filename",e.value),n.search=s.toString();const i=await g(n.toString());(await L(e)).setMode(i.language)}function k(e){const t=e.querySelectorAll(".js-remove-gist-file");for(const n of t)n.classList.toggle("d-none",t.length<2)}l(".js-gist-filename",async e=>{const t=e,n=i(e,".js-code-editor");await L(n),f(t,y),e.addEventListener("blur",()=>d(t,y),{once:!0})}),n("click",".js-add-gist-file",(function(t){t.preventDefault(),e(i(t.currentTarget,".js-blob-form")).scrollIntoView()})),n("gist:filedrop",".js-blob-form",(async function(t){const{file:n,data:s}=t.detail,i=function(t){for(const e of t.querySelectorAll(".js-gist-file")){const t=o(e,".js-gist-filename",HTMLInputElement),n=o(e,".js-blob-contents",HTMLTextAreaElement);if(!t.value&&!n.value)return e}return e(t)}(t.currentTarget),r=o(i,".js-gist-filename",HTMLInputElement);r.value=n.name,y(r),(await L(r)).setCode(s),i.scrollIntoView()})),n("click",".js-remove-gist-file",(function(e){e.preventDefault();const t=i(e.currentTarget,".js-gist-file");for(const n of r(t,".js-gist-deleted input",HTMLInputElement))n.disabled=!1;o(t,".js-code-editor").remove()})),s(".js-remove-gist-file",(function(e){const t=i(e,".js-gist-files");return{add(){k(t)},remove(){k(t)}}})),l(".js-quicksearch-field",(function(e){h(o(e.form,".js-quicksearch-results"))})),m(".js-quicksearch-field",(async function(e){const t=e.target,n=t.value.replace(/^\s+|\s+$/g,""),s=i(t,"form"),r=o(s,".js-quicksearch-results"),a=c(r,"data-quicksearch-url");let l="";null==w||w.abort();const{signal:u}=w=new AbortController;if(n.length){const e=new URL(a,window.location.origin),t=new URLSearchParams(e.search.slice(1));t.append("q",n),e.search=t.toString(),s.classList.add("is-sending");try{const t=await fetch(e.toString(),{signal:u});t.ok&&(l=await t.text())}catch(f){}}if(u.aborted)return;l&&(r.innerHTML=l);r.classList.toggle("active",""!==n),s.classList.remove("is-sending")})),n("navigation:keydown",".js-quicksearch-results",(function(e){const t=e,n=t.target,s=i(n,"form",HTMLFormElement);if("Escape"===t.detail.hotkey){const e=o(s,".js-quicksearch-results");e.classList.remove("active"),v(e)}else"Enter"!==t.detail.hotkey||n.classList.contains("js-navigation-item")||(p(s),t.preventDefault())})),n("submit",".js-quicksearch-form",(function(e){const t=e.currentTarget.querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),j(t))})),n("focusout:delay",".js-quicksearch-field",(function(e){const t=i(e.currentTarget,"form",HTMLFormElement).querySelector(".js-quicksearch-results");t&&(t.classList.remove("active"),j(t))}));let w=null;a(".js-gist-file-update-container .js-comment-update",(async function(e,t){let n;try{n=await t.json()}catch(s){return}if(e.action=n.json.url,n.json.authenticity_token){o(e,"input[name=authenticity_token]",HTMLInputElement).value=n.json.authenticity_token}})),s(".js-gist-dropzone",()=>{t.import("./drag-drop.js")})}}}));
//# sourceMappingURL=gist-bootstrap-daffb570.js.map
